<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Cookie demo</title>
</head>
<body>

<input type="text" id="lang" placeholder="Введіть мову">
<button onclick="saveCookie()">Зберегти в cookie</button>

<p id="output"></p>
<p id="ipInfo">Завантаження IP...</p>

<!-- Текст + місце для виводу інформації про браузер -->
<p><strong>Ваш браузер:</strong> <span id="browser"></span></p>

<!-- Текст + місце для виводу інформації про мову інтерфейсу -->
<p><strong>Мова інтерфейсу:</strong> <span id="lang"></span></p>

<script>
    // Функція збереження cookie
    function saveCookie() {
        const lang = document.getElementById("lang").value;
        document.cookie = "language=" + lang + "; path=/; max-age=86400";
        alert("Cookie збережено!");
        showSavedLanguage();
    }

    // Вивід збереженої мови
    function showSavedLanguage() {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.startsWith("language=")) {
                const lang = cookie.substring("language=".length);
                document.getElementById("output").textContent = "Збережена мова: " + lang;
                return;
            }
        }
        document.getElementById("output").textContent = "Мова ще не збережена.";
    }

    // Функція визначення IP
    async function getUserIP() {
        try {
            const response = await fetch("https://api.ipify.org?format=json");
            const data = await response.json();
            document.getElementById("ipInfo").textContent = "Ваш IP: " + data.ip;
        } catch (error) {
            document.getElementById("ipInfo").textContent = "Не вдалося отримати IP.";
        }
    }

    // Показати при завантаженні
    showSavedLanguage();
    getUserIP();
    // Отримати User-Agent — рядок, що містить інформацію про браузер і операційну систему
    const browserInfo = navigator.userAgent;

    // Вивести цю інформацію в елемент із id="browser"
    document.getElementById("browser").textContent = browserInfo;

    // Отримати основну мову інтерфейсу браузера користувача
    const language = navigator.language || navigator.userLanguage;

    // Вивести мову в елемент із id="lang"
    document.getElementById("lang").textContent = language;
</script>

</body>
</html>
